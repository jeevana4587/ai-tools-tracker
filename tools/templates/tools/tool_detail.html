{% extends "dashboard/base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto mt-8 bg-white p-6 rounded-lg shadow">
  <div class="flex items-center gap-6 mb-4">
    {% if tool.logo %}
      <img src="{{ tool.logo.url }}" alt="{{ tool.name }}" class="w-24 h-24 object-contain">
    {% endif %}
    <h2 class="text-3xl font-bold">{{ tool.name }}</h2>
  </div>

  <p class="text-gray-700 mb-4">{{ tool.description }}</p>

  <p class="mb-2">
    <strong>Website:</strong>
    <a href="{{ tool.website }}" target="_blank" class="text-blue-600 underline">{{ tool.website }}</a>
  </p>

  <p class="mb-4">
    <strong>Access Type:</strong>
    {% if tool.access_type == "Free" %}
      ðŸŸ¢ Free
    {% elif tool.access_type == "Freemium" %}
      ðŸŸ¡ Freemium
    {% else %}
      ðŸ”’ Paid
    {% endif %}
  </p>

  {% if user.is_authenticated %}
    
    <form method="post" action="{% url 'favourites:toggle' tool.id %}" class="mb-4">
      {% csrf_token %}
      {% if is_favourited %}
        <button class="bg-red-100 text-red-600 px-3 py-1 rounded">ðŸ’” Remove from Favourites</button>
      {% else %}
        <button class="bg-green-100 text-green-600 px-3 py-1 rounded">ðŸ’– Add to Favourites</button>
      {% endif %}
    </form>

    
    <a href="{% url 'reviews:add_review' tool.id %}" class="text-blue-600 underline block mb-4">
      Add / Edit Your Review
    </a>
  {% endif %}

  <h3 class="text-lg font-semibold mt-6 mb-2">User Reviews:</h3>
  <ul>
    {% for review in tool.reviews.all %}
      <li class="mb-2 border-b pb-2">
        <strong>{{ review.user.username }}</strong> rated {{ review.stars }}â˜…<br>
        <small class="text-gray-500">{{ review.created_at }}</small><br>
        {{ review.comment }}
      </li>
    {% empty %}
      <li>No reviews yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
